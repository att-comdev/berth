
vmlist:
  - name: demo-ub14-apache
    enabled: true
    vmconfig:
      cpu:
        vcpu: 1
        ram_mb: 1024
      rootfs:
        sourceurl: http://stupidest.org/vm/ubuntu-14.04-amd64.img
        localtarget: ubuntu-14.04-amd64.qcow2
        pvc_size: 5Gi
        pvc_class: nfs
    netconfig:
      ports:
        ssh: 22
        vnc: 5900
      readinessTcpProbe: 22
    cloudconfig:
      metadata: |
        { "uuid": "apache-demo.example.com" }
      userdata: |
        #cloud-config
        fqdn: apache-demo.example.com
        users:
          - name: root
            ssh-authorized-keys:
              - "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIPE/zGmNx3W52ztb/2vvTcgUN7RGbq172QXGcXKAagU1 user@host"
              - "ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBKVeMUpC6Ba0UwyLeCCWexr/sc4kYwKW6mTSTpcQHDm+F5UqoW3pnbGPn3WSJB2AbCMP9oG0qQrLP2zHmE7fyog= otheruser@otherhost"
        ssh_pwauth: True
        runcmd:
          - [ apt-get, update ]
          - [ apt-get, install, -y, --force-yes, apache2 ]

  - name: ub16-smp-test
    enabled: true
    vmconfig:
      cpu:
        vcpu: 2
        ram_mb: 2048
      rootfs:
        sourceurl: http://stupidest.org/vm/cw-ub16-test-3a.qcow2
        localtarget: vm51.qcow2
        pvc_size: 7Gi
    netconfig:
      ports:
        ssh: 22
        vnc: 5900
    cloudconfig:
      metadata: |
        { "uuid": "093772fe-d6a3-4eea-84bc-5966661a0c3e" }
      userdata: |
        #cloud-config
        fqdn: ub16-smp-test.example.com
        users:
          - name: root
            ssh-authorized-keys:
              - "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIPE/zGmNx3W52ztb/2vvTcgUN7RGbq172QXGcXKAagU1 user@host"
              - "ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBKVeMUpC6Ba0UwyLeCCWexr/sc4kYwKW6mTSTpcQHDm+F5UqoW3pnbGPn3WSJB2AbCMP9oG0qQrLP2zHmE7fyog= otheruser@otherhost"
        ssh_pwauth: True

  - name: cirros-test
    enabled: true
    vmconfig:
      cpu:
        vcpu: 1
        ram_mb: 256
      rootfs:
        sourceurl: http://stupidest.org/vm/cirros-0.3.5-x86_64-disk.img
        localtarget: cirros-vm.qcow2
        pvc_size: 128Mi
    netconfig:
      ports:
        ssh: 22
        vnc: 5900
    cloudconfig:
      metadata: |
        {
            "uuid": "093772fe-d6a3-4eea-84bc-5966661a0c3e",
            "name": "my-name",
            "instance-id": "my-instance-id",
            "availability-zone": "my-az",
            "hostname": "my-hostname",
            "local-hostname": "my-local-hostname",
            "launch-index": "123"
        }
      userdata: |
        #cloud-config
        fqdn: cirros.example.com
        users:
          - name: root
            ssh-authorized-keys:
              - "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIPE/zGmNx3W52ztb/2vvTcgUN7RGbq172QXGcXKAagU1 user@host"
              - "ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBKVeMUpC6Ba0UwyLeCCWexr/sc4kYwKW6mTSTpcQHDm+F5UqoW3pnbGPn3WSJB2AbCMP9oG0qQrLP2zHmE7fyog= otheruser@otherhost"
        ssh_pwauth: True
      bogus_not_used: "this won't hurt anthing but shouldn't be here"

# this vm isn't fully defined, not enabling it is enough to have the
# templates skip over the details and not barf
  - name: bogus-vm
    enabled: false
    extra: "thang"
    vmconfig: "this is wrong"
    cloudconfig:
      metadata: "{ "
      userdata: false
